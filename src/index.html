<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <!-- 引入css 和图标图的css  引入才可以生效 -->
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
    <script src="./js/index.js"></script>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script src="./js/form-serialize.js"></script>
</head>

<body>
    <div class="container" id="container">
        <div class="form-container sign-up-container">
            <!-- 注册 -->
            <form id="signInForm">
                <h1>用户注册</h1>
                <input type="text" placeholder="用户名" name="account">
                <input type="password" placeholder="密码" name="password">
                <input type="email" placeholder="邮箱" name="email">
                <a href="./update.html">更改用户信息?</a>
                <div class="social-container">
                    <a href="#" class="social"><i class="fa fa-weixin"></i></a>
                    <a href="#" class="social"><i class="fa fa-qq"></i></a>
                    <a href="#" class="social"><i class="fa fa-twitter"></i></a>
                    <a href="#" class="social"><i class="fa fa-github"></i></a>
                </div>
                <span>您也可以选择以上几种方式注册您的账户</span>
                <button type="submit" name="submit_1">注册</button>
            </form>

            <script>
                var form = document.getElementById('signInForm')
                
                //注册监听
                form.addEventListener('submit',async function(e){                 
                    //阻止刷新
                    e.preventDefault();
                    let result = serializeForm1(form);
                    console.log(result);
                    try {
                    let res = await http({
                        method:'post',
                        url:'http://localhost:5000/product',
                        data:result
                    })
                    //提交弹窗
                    //console.log(res.status);
                    }catch (error) {
                        console.log(error);
                    }
                })
            </script>

            <button><a class="word" href="./update.html">变更</a></button>
        </div>
        
        <div class="form-container sing-in-container">
            <!-- 登陆 -->
            <form id="signUpForm">
                <h1>用户登陆</h1>
                <input type="text" placeholder="用户名" name="account">
                <input type="password" placeholder="密码" name="password">
                
                <hr>
                <span>
                <a href="./query.html">忘记账户?</a> / <a href="./delete.html">想要注销?</a>
                </span>
                <hr>

                <div class="social-container">
                    <a href="#" class="social"><i class="fa fa-weixin"></i></a>
                    <a href="#" class="social"><i class="fa fa-qq"></i></a>
                    <a href="#" class="social"><i class="fa fa-twitter"></i></a>
                    <a href="#" class="social"><i class="fa fa-github"></i></a>
                </div>
                <span>您可以选择以上几种方式登录您的账户</span>    
                <button type="submit" name="submit_2">登陆</button>
            </form>
            
            <script>
                var form_2 = document.getElementById('signUpForm')
                
                //注册监听
                form_2.addEventListener('submit',async function(e){                 
                    //阻止刷新
                    e.preventDefault();
                    let result_2 = serializeForm1(form_2);
                    console.log(result_2)
                    
                    var reg = 0
                    reg = await logIn(result_2)
                    console.log(reg);
                    if(reg == 1){window.location.href='./main.html'}
                })
            </script>

        </div>
        
        <!-- 侧边栏内容 -->
        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-pannel overlay-left">
                    <h1>已有账号?</h1>
                    <p>亲爱的用户点我去进行登陆吧。</p>
                    <button class="ghost" id="signIn">登陆</button>
                </div>

                <div class="overlay-pannel overlay-right">
                    <h1>没有帐号？</h1>
                    <p>点击注册去注册一个属于你的账号吧</p>
                    <button class="ghost" id="signUp">注册</button>
                </div>
            </div>
        </div>

    </div>
</body>
<script src="./js/app.js"></script>

</html>